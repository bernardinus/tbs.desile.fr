<p class="row">
  <div class="col-sm-2 text-center"></div>
  <div class="col-sm-2 text-center"></div>
  <div class="col-sm-2 text-center"></div>
  <div class="col-sm-2 text-center"></div>
  <div class="col-sm-2 text-center"><small translate>One is an OP carrier</small></div>
  <div class="col-sm-2 text-center"><input type="checkbox" class="" ng-model="exclude_last" ng-click="change_exclude()"/></div>
</p>
<p class="row">
  <div class="col-sm-2">
    <select class="form-control form-control-sm"
        ng-model="slot['1']"
        ng-options="character.ref as character.name group by character.class_ref.toUpperCase() for character in characters "
        ng-change="change_slot(1)">
      <option value="">...</option>
    </select>
  </div>
  <div class="col-sm-2">
    <select class="form-control form-control-sm"
        ng-model="slot['2']"
        ng-options="character.ref as character.name group by character.class_ref.toUpperCase() for character in characters"
        ng-change="change_slot(2)">
      <option value="">...</option>
    </select>
  </div>
  <div class="col-sm-2">
    <select class="form-control form-control-sm"
        ng-model="slot['3']"
        ng-options="character.ref as character.name group by character.class_ref.toUpperCase() for character in characters"
        ng-change="change_slot(3)">
      <option value="">...</option>
    </select>
  </div>  
  <div class="col-sm-2">
    <select class="form-control form-control-sm"
        ng-model="slot['4']"
        ng-options="character.ref as character.name group by character.class_ref.toUpperCase() for character in characters"
        ng-change="change_slot(4)">
      <option value="">...</option>
    </select>
  </div>
  <div class="col-sm-2">
    <select class="form-control form-control-sm"
        ng-model="slot['5']"
        ng-options="character.ref as character.name group by character.class_ref.toUpperCase() for character in characters"
        ng-change="change_slot(5)">
      <option value="">...</option>
    </select>
  </div>
  <div class="col-sm-2">
    <select class="form-control form-control-sm"
        ng-model="slot['6']"
        ng-options="character.ref as character.name group by character.class_ref.toUpperCase() for character in characters"
        ng-change="change_slot(6)">
      <option value="">...</option>
    </select>
  </div>  
</p>

<p class="row">
  <!-- Job 1 -->
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['1'][slot['1']]" ng-change="change_job_level_slot(1, 1)" min="1" max="{{ max_level }}" ng-disabled="! slot[1]" /></div>
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['1'][slot['2']]" ng-change="change_job_level_slot(1, 2)" min="1" max="{{ max_level }}" ng-disabled="! slot[2]" /></div>
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['1'][slot['3']]" ng-change="change_job_level_slot(1, 3)" min="1" max="{{ max_level }}" ng-disabled="! slot[3]"/></div>
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['1'][slot['4']]" ng-change="change_job_level_slot(1, 4)" min="1" max="{{ max_level }}" ng-disabled="! slot[4]"/></div>
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['1'][slot['5']]" ng-change="change_job_level_slot(1, 5)" min="1" max="{{ max_level }}" ng-disabled="! slot[5]"/></div>
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['1'][slot['6']]" ng-change="change_job_level_slot(1, 6)" min="1" max="{{ max_level }}" ng-disabled="! slot[6]"/></div>
</p>

<p class="row">
  <!-- Job 2 -->
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['2'][slot['1']]" ng-change="change_job_level_slot(2, 1)" min="1" max="{{ max_level }}" ng-disabled="keyed_chars[slot[1]].max_job == 1 || !slot[1] || job_levels[slot[1]] < 2"/></div>
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['2'][slot['2']]" ng-change="change_job_level_slot(2, 2)" min="1" max="{{ max_level }}" ng-disabled="keyed_chars[slot['2']].max_job == 1 || !slot[2] || job_levels[slot[2]] < 2"/></div>
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['2'][slot['3']]" ng-change="change_job_level_slot(2, 3)" min="1" max="{{ max_level }}" ng-disabled="keyed_chars[slot['3']].max_job == 1 || !slot[3] || job_levels[slot[3]] < 2"/></div>
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['2'][slot['4']]" ng-change="change_job_level_slot(2, 4)" min="1" max="{{ max_level }}" ng-disabled="keyed_chars[slot['4']].max_job == 1 || !slot[4] || job_levels[slot[4]] < 2"/></div>
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['2'][slot['5']]" ng-change="change_job_level_slot(2, 5)" min="1" max="{{ max_level }}" ng-disabled="keyed_chars[slot['5']].max_job == 1 || !slot[5] || job_levels[slot[5]] < 2"/></div>
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['2'][slot['6']]" ng-change="change_job_level_slot(2, 6)" min="1" max="{{ max_level }}" ng-disabled="keyed_chars[slot['6']].max_job == 1 || !slot[6] || job_levels[slot[6]] < 2"/></div>
</p>

<p class="row">
  <!-- Job 3 -->
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['3'][slot['1']]" ng-change="change_job_level_slot(3, 1)" min="1" max="{{ max_level }}" ng-disabled="keyed_chars[slot['1']].max_job == 1 || !slot[1] || job_levels[slot[1]] < 3"/></div>
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['3'][slot['2']]" ng-change="change_job_level_slot(3, 2)" min="1" max="{{ max_level }}" ng-disabled="keyed_chars[slot['2']].max_job == 1 || !slot[2] || job_levels[slot[2]] < 3"/></div>
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['3'][slot['3']]" ng-change="change_job_level_slot(3, 3)" min="1" max="{{ max_level }}" ng-disabled="keyed_chars[slot['3']].max_job == 1 || !slot[3] || job_levels[slot[3]] < 3"/></div>
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['3'][slot['4']]" ng-change="change_job_level_slot(3, 4)" min="1" max="{{ max_level }}" ng-disabled="keyed_chars[slot['4']].max_job == 1 || !slot[4] || job_levels[slot[4]] < 3"/></div>
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['3'][slot['5']]" ng-change="change_job_level_slot(3, 5)" min="1" max="{{ max_level }}" ng-disabled="keyed_chars[slot['5']].max_job == 1 || !slot[5] || job_levels[slot[5]] < 3"/></div>
  <div class="col-sm-2"><input type="number" class="form-control form-control-sm" ng-model="job_level['3'][slot['6']]" ng-change="change_job_level_slot(3, 6)" min="1" max="{{ max_level }}" ng-disabled="keyed_chars[slot['6']].max_job == 1 || !slot[6] || job_levels[slot[6]] < 3"/></div>
</p>

<p>&nbsp;</p>

<table class="table table-condensed table-striped" ng-repeat="zone in mzs">
  <tr>
    <th translate>Metal Zone {{ zone }}</th>
    <th translate>Current level</th>
    <th translate>Starting level</th>
    <th translate>Ending level</th>
    <th translate>Starting XP</th>
    <th translate>Ending XP</th>
    <th translate>Need XP</th>
    <th translate>#run</th>
  </tr>
  <tr ng-repeat="job in jobs | filter: filter_mz(zone) | orderBy: 'ref'">
    <td class="element-{{ job.element_ref }}">
        <div class="element-weapon-container">
            <span class="weapon weapon-{{ job.weapon_ref }}"></span>
        </div>
        <span style="padding-left: 16px;">{{ job.character_name }}</span>
        <span class="pull-right job-have-job-{{ job.have_job }}"> Job {{ job.level }}</span>
    </td>
    <td class="text-center">{{ job.char_level() }}</td>
    <td class="text-center">{{ job.level_start(zone) }}</td>
    <td class="text-center">{{ job.level_end(zone) }}</td>
    <td class="text-center">{{ job.start_exp(zone) | number:0 }}</td>
    <td class="text-center">{{ job.end_exp(zone) | number:0 }}</td>
    <td class="text-center">{{ job.need_next(zone) | number:0 }}</td>
    <td class="text-center" ng-if="debug">{{ job.avg_xp(zone) | number:0 }}</td>
    <td class="text-center">&asymp; {{ job.nb_run(zone) | number }}</td>
  </tr>
  <tr>
      <td colspan="6"></td>
      <th translate>Total runs</th>
      <td class="text-center">
          {{ jobs | filter: filter_mz(zone) | agg_mz_run:zone:{ team_size: slot_count() } }}
      </td>
  </tr>
</table>
